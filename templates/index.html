{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css">
    <title>Document</title>
</head>
<body class="" style='background-color:rgb(0,0,0,0.1)'>
    <h1 class="ui raised segment centered center aligned header"><img src='media/logo.png' style='float:left;margin-top:-6px;' />Resume Analysis</h1><br>
    <form class="ui form centered center aligned grid" enctype="multipart/form-data" action="/Upload" method="post"> {% csrf_token %}
    	<div class="field">
    		<div class="ui raised segment">
    			<label style="color: navy;font-weight: bold;">Upload Job Description</label>
    			<input class="required" required type="file" name="jobDescription" multiple accept=".pdf"><!--.doc, .docx, .odt,.txt-->
    		</div>
    	</div>
    	<div class="field">
    		<div class="ui raised segment">
    			<label style="color: navy;font-weight: bold;">Upload Resumes</label>
    			<input class="required" required type="file" name="files" multiple accept=".pdf"> <!--.doc, .docx, .odt,.txt-->
    		</div>
    	</div>
        <br />
      <div class="field">
      	<br/>
      	<input type="submit" name="Submit" value="Submit" class="ui blue button" onclick="showLoading()">
      </div>
        
        {% csrf_token %}
    	
    </form>
	<div class="ui basic modal" id="loadingModal" data-keyboard="false">
	  <div class="content"> 
	  	<div class="ui two column stackable grid" style="border:1px solid white;border-radius: 5px;">
	  		<div class="column" >
	  			<img src="media/loading.gif" class="ui big image">		
	  		</div>
	  		<div class="left floated column" >
	  			<h1 style="color: white;float: left;margin-top:100px;" align="left">Please wait . . .</h1>
	  			<br><br>
	  			<h3 style="color: white;float: left;margin-top:100px;color:#8ad1c0" align="left">Analzying &nbsp;&nbsp;Profiles . . . !</h3>
	  		</div>
	  	</div>
	  	
	  </div>
	  
	</div>
	<script type="text/javascript">
		function showLoading(){
			var required = $('input,textarea,select').filter('[required]:visible');
			console.log(required);
			var allRequired = true;
			required.each(function(){
			    if($(this).val() == ''){
			        allRequired = false;
			    }
			});

			if(!allRequired){
			  
			}else{
				//$('#loadingModal').modal('show').dimmer({'keyboardShortcuts':false,'closable':false});	
			$('.ui.modal').modal({
  				onApprove : function() {
  				  return false;
 				 }
			}).modal({closable:false}).modal('show');

			}
			
		}
		$(document).keydown(function(e) {
		    // ESCAPE key pressed
		    if (e.keyCode == 27) {
		        return false;
		    }
		});

		$("body").on("keyup", function(e){
		    if (e.which === 27){
		        return false;
		    } 
		});
	</script>
	<script type="text/javascript">
		//Page reload ..trick

		window.addEventListener( "pageshow", function ( event ) {
		  var historyTraversal = event.persisted || 
		  							( typeof window.performance != "undefined" && 
		                              window.performance.navigation.type === 2 );
		  if ( historyTraversal ) {
		    // Handle page restore.
		    window.location.reload();
		  }
		});
	</script>

</script>
</body>
</html>
